"use strict"

import { showError } from "./script.js";




////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                   //To send the dragged and dropped mail to the server and check if they are valid
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
export const mailsArraytoServer = (mailArray)=>{

    fetch("/api/emailfile", {method: "POST", headers:{"Content-Type":"application/json"}, body: JSON.stringify(mailArray)})
    .then(response=>{

        if(!response.ok){
            return response.json().then(data=>{throw data});
        }

          return response.json();

        }
    )
    .then(data=>{
         // NOTE
         console.log("data", data);

         showError("info",`${data.Message}`);}
        )
    .catch(error=>{
        
        console.log("error",error);
         showError("error",`${error.Message}`)
    }
        ); 

}





////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                   //To send the user input value, email, pass,mail to the server AND initiate node mailer api
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
export const sendMailToServer = (UserData)=>{

    fetch("/api/userfile" ,{method: "POST", headers:{"Content-Type":"application/json"}, body: JSON.stringify(UserData)})
    .then(response=>{

        if(!response.ok){
            return response.json().then(data=>{throw data});
        }
       return response.json()
    })
.then(data=>{
     // NOTE
     console.log(data)
    showError("info",`${data.Message}`)
})
    .catch(error=>{

        console.log(error);
         // NOTE
         showError("error",`${error.Message}`)
      }
        );

}